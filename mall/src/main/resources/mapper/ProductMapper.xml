<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mall.dao.ProductDao">
	<!-- 根据商品id查商品 -->
	<select id="queryProductByProductId" resultMap="ProductMap" parameterType="int">
		select * from tb_product  where product_id = #{id};
	</select>
	<!-- 根据店铺 id查询商品 -->
	<select id="queryProductById" resultMap="ProductMap" parameterType="int">
		select * from tb_product where shop_id = #{id};
	</select>
	<!-- 商品搜索模糊查询 -->
	<select id="productSerach" resultMap="ProductMap" parameterType="String">
		select * from tb_product product,tb_shop shop where product.shop_id = shop.shop_id and product.product_name like concat(concat('%',#{name}),'%');
	</select>
	
	<resultMap type="com.example.mall.entity.Product" id="ProductMap">
		<id property="productId" column="product_id"/>
		<result property="productName" column="product_name"/>
		<result property="productDesc" column="product_desc"/>
		<result property="createTime" column="create_time"/>
		<result property="lastEditTime" column="last_edit_time"/>
		<result property="imgAddr" column="img_addr"/>
	</resultMap>
</mapper>